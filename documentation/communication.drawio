<mxfile host="65bd71144e">
    <diagram id="_6_18fxQtefBWD88sm6I" name="Page-1">
        <mxGraphModel dx="1363" dy="1254" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="4" value="Engine" style="rounded=0;whiteSpace=wrap;html=1;align=left;verticalAlign=top;" parent="1" vertex="1">
                    <mxGeometry x="530" y="160" width="530" height="400" as="geometry"/>
                </mxCell>
                <mxCell id="10" value="Scripting Thread #1" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;dashed=1;align=left;verticalAlign=top;strokeColor=#999999;" parent="1" vertex="1">
                    <mxGeometry x="10" y="40" width="200" height="170" as="geometry"/>
                </mxCell>
                <mxCell id="11" value="Engine Thread" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;dashed=1;align=left;verticalAlign=top;strokeColor=#999999;" parent="1" vertex="1">
                    <mxGeometry x="360" y="120" width="720" height="460" as="geometry"/>
                </mxCell>
                <mxCell id="2" value="User/Student&lt;br&gt;Script&lt;br&gt;(blocking)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#6d8764;fontColor=#ffffff;strokeColor=#3A5431;" parent="1" vertex="1">
                    <mxGeometry x="40" y="80" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="24" value="API-Channel transmitting Requests, Responses and Events" style="edgeStyle=none;html=1;entryX=0.75;entryY=1;entryDx=0;entryDy=0;dashed=1;fillColor=#f0a30a;strokeColor=#BD7000;startArrow=classic;startFill=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="40" target="8" edge="1">
                    <mxGeometry x="0.2381" y="10" relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="100" y="270"/>
                        </Array>
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="3" value="runtime" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="40" y="140" width="120" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="19" value="" style="edgeStyle=none;html=1;strokeColor=#4437F0;" parent="1" source="5" target="18" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="21" style="edgeStyle=none;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;startFill=0;" parent="1" source="6" target="18" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="875" y="325"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="6" value="Input Event Queue" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="815" y="160" width="120" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="7" value="Implementor/Teacher&lt;br&gt;Script&lt;br&gt;(call-back)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#6d8764;fontColor=#ffffff;strokeColor=#3A5431;" parent="1" vertex="1">
                    <mxGeometry x="380" y="170" width="120" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="8" value="runtime" style="rounded=0;whiteSpace=wrap;html=1;rotation=90;" parent="1" vertex="1">
                    <mxGeometry x="560" y="245" width="50" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="9" value="" style="endArrow=classic;startArrow=classic;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="7" target="8" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="560" y="590" as="sourcePoint"/>
                        <mxPoint x="610" y="540" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="12" value="UI Thread" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;dashed=1;align=left;verticalAlign=top;strokeColor=#999999;" parent="1" vertex="1">
                    <mxGeometry x="360" y="600" width="720" height="190" as="geometry"/>
                </mxCell>
                <mxCell id="13" value="Renderer" style="rounded=0;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;" parent="1" vertex="1">
                    <mxGeometry x="485" y="660" width="150" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="14" value="Window&lt;br&gt;Message Loop" style="rounded=0;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;" parent="1" vertex="1">
                    <mxGeometry x="635" y="660" width="150" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="17" value="Input Events" style="edgeStyle=none;html=1;dashed=1;fillColor=#f0a30a;strokeColor=#BD7000;" parent="1" source="15" target="6" edge="1">
                    <mxGeometry x="0.6356" y="-10" relative="1" as="geometry">
                        <mxPoint x="1080" y="695" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="1120" y="695"/>
                            <mxPoint x="1120" y="80"/>
                            <mxPoint x="875" y="80"/>
                        </Array>
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="15" value="User Input&lt;br&gt;(Mouse, Keyboard)&lt;br&gt;Window Events&lt;br&gt;(Exit, Resize)" style="rounded=0;whiteSpace=wrap;html=1;align=center;verticalAlign=middle;" parent="1" vertex="1">
                    <mxGeometry x="785" y="660" width="150" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="28" value="" style="edgeStyle=none;html=1;strokeColor=#4437F0;" parent="1" source="18" target="27" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="18" value="Input System" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#4437F0;" parent="1" vertex="1">
                    <mxGeometry x="595" y="300" width="120" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="23" style="edgeStyle=none;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;startArrow=classic;startFill=1;" parent="1" source="22" target="5" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="740" y="255"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="22" value="API Endpoint&lt;br&gt;(custom)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#6d8764;fontColor=#ffffff;strokeColor=#3A5431;" parent="1" vertex="1">
                    <mxGeometry x="695" y="160" width="90" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="26" value="Render State" style="edgeStyle=none;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="25" target="13" edge="1">
                    <mxGeometry x="0.3" relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="560" y="495"/>
                        </Array>
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="30" value="Game Loop" style="edgeStyle=none;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=#4437F0;" parent="1" source="25" target="5" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="655" y="540"/>
                            <mxPoint x="760" y="540"/>
                            <mxPoint x="760" y="210"/>
                            <mxPoint x="655" y="210"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="25" value="Render System" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#4437F0;" parent="1" vertex="1">
                    <mxGeometry x="595" y="470" width="120" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="29" style="edgeStyle=none;html=1;strokeColor=#4437F0;" parent="1" source="27" target="25" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="27" value="Some more&lt;br&gt;Systems â€¦" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#4437F0;" parent="1" vertex="1">
                    <mxGeometry x="595" y="389" width="120" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="5" value="Scripting System" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#4437F0;" parent="1" vertex="1">
                    <mxGeometry x="595" y="230" width="120" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="33" style="edgeStyle=none;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#FFFFFF;startArrow=classic;startFill=1;" parent="1" source="32" target="27" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1005" y="414"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="32" value="API Server&lt;br&gt;(built-in)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="960" y="160" width="90" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="36" value="user-provided item&lt;br&gt;(not part of gam3du)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#6d8764;fontColor=#ffffff;strokeColor=#3A5431;" parent="1" vertex="1">
                    <mxGeometry x="20" y="770" width="200" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="37" value="Asynchronous Messages Channel&lt;br&gt;between Threads" style="edgeStyle=none;html=1;dashed=1;fillColor=#f0a30a;strokeColor=#BD7000;" parent="1" edge="1">
                    <mxGeometry x="0.5833" y="20" relative="1" as="geometry">
                        <mxPoint x="40" y="730" as="sourcePoint"/>
                        <mxPoint x="20" y="710" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="20" y="730"/>
                            <mxPoint x="20" y="750"/>
                            <mxPoint x="220" y="750"/>
                            <mxPoint x="220" y="710"/>
                        </Array>
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="38" value="Legend" style="text;strokeColor=none;align=center;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="10" y="660" width="60" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="39" value="The Scripting System will poll API endpoints for new commands and wake the associated (Implementor/Teacher) Script to process the received messages (could be a `CommandEvent`).&lt;br&gt;The Script can use the Scripting System to send responses to its callers&lt;br&gt;&lt;br&gt;Alternative: The Implementor Script directly interacts with its Clients via a channel. As the script doesn't run in its own thread it needs to be triggere by the engine within each iteration to poll for new messages&lt;br&gt;&lt;br&gt;Variant: Still directly connected but the Engine knows about the API-Channels and wakes the Script whenever something has been received (Engine polls â†’ Script processes). This way the engine doesn't have to forward the messages. It needs to know about the existence of the API anyhow in order to make it publicly available.&lt;br&gt;&lt;br&gt;Irrespective of external communication with User scripts: the engine will inform implementor scripts about subscribed events (TBD only once per iteration or between Systems)" style="text;strokeColor=none;align=left;fillColor=none;html=1;verticalAlign=top;whiteSpace=wrap;rounded=0;dashed=1;" parent="1" vertex="1">
                    <mxGeometry x="10" y="280" width="320" height="370" as="geometry"/>
                </mxCell>
                <mxCell id="40" value="API Client" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#6d8764;fontColor=#ffffff;strokeColor=#3A5431;" parent="1" vertex="1">
                    <mxGeometry x="40" y="160" width="120" height="20" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>